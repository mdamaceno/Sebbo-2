$(document).ready(function(){if(null!=document.getElementById("zipcode").innerHTML){getCep(document.getElementById("zipcode").innerHTML,{pac:"PAC",sedex:"SEDEX"});var e=0;$(".total-price").each(function(){var t=$(this).text(),t=t.replace("R$","").replace(",",".");isNaN(t)||0==t.length||(e+=parseFloat(t))}),document.getElementById("total-cart").innerHTML="Total: R$"+e.toFixed(2).replace(".",","),$(".product-refresh").click(function(){var e=$(this).closest("tr").find(".pid").text(),t=$(this).closest("tr").find(".p-qty").find("#p_quantity").val();$.ajax({url:"/carrinho/"+e,type:"post",dataType:"json",data:{cart:{quantity:t}}}).done(function(){location.reload()}).fail(function(){console.log("error")})}),$("#save-order").click(function(){var e=gon.address.field1,t=gon.address.field2,o=gon.address.field3,r=gon.address.field4,n=gon.address.city,i=gon.address.state,a=gon.current_user.id;$.ajax({url:"/pedido",type:"POST",dataType:"json",data:{order:{freight_price:parseFloat($("input[name='tipoFrete']:checked").data("valor")),freight_type:$("input[name='tipoFrete']:checked").val(),status:"Processando",delivery_field1:e,delivery_field2:t,delivery_field3:o,delivery_field4:r,delivery_city:n,delivery_state:i,user_id:a}}}).done(function(e){console.log(e);var t=[],o=[],r=[];$(".nr").each(function(){t.push($(this).text())}),$(".p-qty").each(function(){o.push($(this).find("#p_quantity").val())}),$(".p-price").each(function(){r.push($(this).text())});for(var n=0;n<t.length;n++)$.ajax({url:"/produtos-pedidos",type:"POST",dataType:"json",data:{product_order:{name:t[n],price:r[n].replace("R$","").replace(",","."),quantity:o[n],order_id:e.id}}}).done(function(){window.location.reload()}).fail(function(){console.log("error")})}).fail(function(){console.log("error")})})}else window.location.reload("/usuarios"+gon.current_user.id+"/editar")});